<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>Bookings - GreenRide</title>
    <style>
        body{font-family:Arial,sans-serif;background:#f8f9fa;margin:0;padding:30px}
        .top a{color:#007bff;text-decoration:none;font-weight:bold;margin-right:12px}
        .card{background:#fff;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.10);padding:18px;margin:16px 0}
        h1{margin:0 0 10px;color:#2c3e50}
        table{width:100%;border-collapse:collapse;margin-top:10px}
        th,td{padding:10px;border-bottom:1px solid #eee;text-align:left}
        button{padding:9px 12px;border:none;border-radius:6px;background:#6c757d;color:#fff;font-weight:bold;cursor:pointer}
        .msgOk{color:#1e7e34;font-weight:bold}
    </style>
</head>
<body>

<div class="top">
    <a href="/">Home</a>
    <a href="/profile">Profile</a>
    <a href="/rides">Rides</a>
    <a href="/swagger-ui/index.html">Swagger</a>
</div>

<h1>My Bookings</h1>

<p class="msgOk" th:if="${param.booked}">Booking created ✅</p>
<p class="msgOk" th:if="${param.canceled}">Booking canceled ✅</p>

<div class="card">
    <table>
        <thead>
        <tr>
            <th>Booking ID</th>
            <th>Ride ID</th>
            <th>Driver</th>
            <th>Origin</th>
            <th>Destination</th>
            <th>Departure</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="b : ${bookings}">
            <td th:text="${b.id}">1</td>
            <td th:text="${b.ride.id}">10</td>
            <td th:text="${b.ride.driver.username}">driver</td>
            <td th:text="${b.ride.origin}">A</td>
            <td th:text="${b.ride.destination}">B</td>
            <td th:text="${b.ride.departureTime}">time</td>
            <td th:text="${b.status}">CONFIRMED</td>
            <td>
                <form th:action="@{'/bookings/' + ${b.id} + '/cancel'}" method="post">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button type="submit">Cancel</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>
